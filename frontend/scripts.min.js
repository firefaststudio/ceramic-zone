const navToggle = document.querySelector(".nav-toggle"), menu = document.getElementById("menu"); navToggle && menu && navToggle.addEventListener("click", () => { const e = "true" === navToggle.getAttribute("aria-expanded"); navToggle.setAttribute("aria-expanded", !e), menu.classList.toggle("open") }); const header = document.querySelector(".site-header"); window.addEventListener("scroll", () => { window.scrollY > 10 ? header.classList.add("scrolled") : header.classList.remove("scrolled") }); const fadeEls = document.querySelectorAll(".fade-in"), observer = new IntersectionObserver(e => { e.forEach(e => { e.isIntersecting && (e.target.classList.add("visible"), observer.unobserve(e.target)) }) }, { threshold: .2 }); fadeEls.forEach(e => observer.observe(e)); const heroMedia = document.querySelector(".hero-media"); if (heroMedia) { let e = !1; function onScroll() { window.innerWidth <= 768 || e || (window.requestAnimationFrame(() => { const t = .3 * window.scrollY; heroMedia.style.transform = `translateY(${t}px) scale(1.05)`, e = !1 }), e = !0) } window.addEventListener("scroll", onScroll, { passive: !0 }), window.addEventListener("resize", () => { window.innerWidth <= 768 && (heroMedia.style.transform = "") }) } window.addEventListener("DOMContentLoaded", () => { document.body.classList.add("page-loaded") }); const animatedEls = document.querySelectorAll(".slide-in-left, .slide-in-right, .slide-in-up, .reveal-img"), animObserver = new IntersectionObserver(e => { e.forEach(e => { e.isIntersecting && (e.target.classList.add("visible"), animObserver.unobserve(e.target)) }) }, { threshold: .2 }); animatedEls.forEach(e => animObserver.observe(e)); const slider = document.querySelector(".testimonial-slider"); if (slider) { let t = 0, n = null; const r = () => { n = setInterval(() => { o(1) }, 4e3) }, s = () => { n && (clearInterval(n), n = null) }, o = e => { t = (t + e + slider.children.length) % slider.children.length, slider.style.transform = `translateX(-${100 * t}%)`, a() }, i = document.querySelector(".test-prev"), d = document.querySelector(".test-next"); i && i.addEventListener("click", () => { s(), o(-1), r() }), d && d.addEventListener("click", () => { s(), o(1), r() }); const l = document.querySelector(".testimonial-indicators"); if (l) for (let u = 0; u < slider.children.length; u++) { const m = document.createElement("button"); m.setAttribute("aria-label", `Mostra testimonianza ${u + 1}`), m.addEventListener("click", () => { s(), t = u, slider.style.transform = `translateX(-${100 * t}%)`, a(), r() }), l.appendChild(m) } const a = () => { l && Array.from(l.children).forEach((e, n) => e.classList.toggle("active", n === t)) }, c = document.querySelector(".testimonial-slider-wrapper"); c && (c.addEventListener("mouseenter", s), c.addEventListener("mouseleave", r), c.addEventListener("focusin", s), c.addEventListener("focusout", r)), r() } function debounce(e, t = 150) { let n; return (...r) => { clearTimeout(n), n = setTimeout(() => e(...r), t) } } window.addEventListener("resize", debounce(() => { window.innerWidth <= 768 && heroMedia && (heroMedia.style.transform = "") }, 200));